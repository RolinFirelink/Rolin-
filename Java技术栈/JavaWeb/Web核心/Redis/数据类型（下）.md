- list基本操作

list类型保存多个数据，底层使用双向链表存储结构实现，其与hash有一点显著不同的是其保存的数据是具有顺序的，并且可以做对应的顺序操作。下图中还带大家复习了顺序表链表以及双向链表的定义，虽然说对我来说其实没有必要就是了

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEf2b00bc8aa688882264dbfa44e80dc22.png)

list类型可以存储多个数据并且可以对存储空间的顺序进行区分，其中key和列表都可以执行对应的操作，其添加元素可以往左添加也可以往右添加，还可以通过下标找到对应元素，弹出元素也可以往左弹和往右弹，但是要注意，我们弹出去就代表出去了，那么这个元素就不在我们的list中了

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE435d2d651a90cba25acf24763625375a.png)

接下来我们来学习下list的基本操作，lpush和rpush分别是往左和往右添加数据，而lrange则是可以获取对应区间中的数据，这里要指定开始与结束的下标，如果指定0 -1则可以直接查看到所有的内容，如果不这么指定又想要获得全部内容的话则需要指定0 长度-1，lindex可以获得指定下标的数据内容，如果我们的下标越界了，其会返回nil，代表不存在数据，而不会抛出数组下标越界异常，llen则可以返回list中key的数目。lpop和rpop则可以从左和从右弹出数据

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE1ab691ddc1a67595c3ca05a05f5d58c2.png)

- list扩展操作

学习完了基本操作之后，我们来学习list扩展操作，list的扩展操作有一个是可以移除lrem指定数据，这里移除可以指定移除的数量，如果指定的数量小于实际的数量，则其会从左往右逐个移除指定的数量，大于或者等于则会移除所有。然后blpop是可以从在规定时间内从左端获取指定的元素，我们这里可以指定多个list，如果第一个有就直接从第一个里拿，没有就从第二个里拿，直到全部都没得拿了，没得拿其就会在我们规定的时间里等待，如果等待过程中有人往我们指定的集合里添加数据，那么其就能取出，若没有，那么到了规定时间之后其就会显示取不到

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE8f7ae47a57946add708afb6aab5b60b2.png)

最后来看下我们的list集合里一些需要注意的事

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE852eef085d033e3ea38c443dcfaba5a0.png)

- list应用场景

list集合的一个简单的应用场景就是用于将多态服务器的操作日志统一顺序输出，我们可以将我们多台服务器的日志信息全部存储到redis中，然后当我们想要访问其数据文件的时候我们就连接redis然后用list集合返回这些信息就可以了

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEeb06edc437e7cb78d80124b9ee96078a.png)

如果我们想要得到最新的消息，那么就使用栈模型，让最后的信息最先出来，如果只是想令其汇总到一起，那么只需要使用队列模型就可以了

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE661fc4a9801cd7ffb50eca1e20781033.png)

- set基本操作

我们同样先来介绍下什么是set，其实和我们java里的set差不多，这里我们理解set数据结构可以用map数据结构来理解，我们这里set代表一整块空间，而其中原来存放key的值就变为的value，而原来存放value的值，则全部存放nil，也就是不存储。而key则变成了代表set本身的一个字符串类型的值。set集合能够保存大量数据，便于查询，其下的数据是不允许重复的

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE6272161e2a4f723685dfa6f0c0c27cf2.png)

其对应的操作有添加和获取全部数据以及删除数据

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEec5c6ad02114f1f89d8f4270f048e323.png)

还有一些特殊的方法，可以获得集合中的数据总量或者是判断其有没有数据

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEe564d8212b32c7a4d29161ec8c8c4c56.png)

- set扩展操作

set集合内的扩展操作有sinter求两个集合的交集，sunion求两个集合的并集，以及sdiff求两个集合的差集，注意差集的结果会因为两个集合的顺序不同而发生变化。而后面的命令则是可以将结果所求的交并差结果存储到指定集合中

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEbebba51726d9c52c22e32fa58263f9e5.png)

最后的smove指令可以将原始集合移动到目标集合中。最后我们看一些set集合的注意事项

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE8961f3ad1448aee1642f587ab16e31e3.png)

- set应用场景

最后我们来看一下set集合的应用场景，set集合的一个经典的应用场景就是用于维护黑名单，具体请看下图介绍的情况

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE824d5673fd743beea4051ff0f053a6f2.png)

黑名单的过滤法有很多种，具体请看下图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEbae325a957f292fc71b5c9c3c0aefdb1.png)

- 实践案例

那么讲解完了所有的数据类型之后，接着我们就来做一个实践案例，我们首先来看看我们的业务场景，请看下图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE5e6870bbe0a109f78a36f471e2e4fae7.png)

接着我们进行一个业务分析，我们可以创建三个数据类型用于完成我们的业务场景，分别是两个list集合和一个set集合，我们的set集合用于存储用户设置为置顶的用户，list集合则有两个，一个设置为存放普通消息，一个设置为存放置顶消息，每次有人发送信息，我们都从先将该的信息与set里的信息进行比对，若其存在于set置顶中，则我们将其放置于置顶集合中，若不是则放置于普通集合中。同时我们每次放集合里放置消息时，都要将集合遍历一遍，然后删除掉原先的内容对应用户的数据，接着将新用户的数据压入，这样就能保证最后发送数据的用户总是排在最前面，这里的list集合是要采用栈模型的，最后我们取出里面的内容时，我们总是先将置顶集合中的内容取出来，后面将普通集合中的内容取出来

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE783379d9a03b6c44a5941b771d51aa57.png)

然后我们来看看具体步骤，这里值得一提的是，我们可以再另外创造一个hash来记录用户发送消息的数量

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEa1cdae6e5d02344410a5bf03bbaf09cb.png)

最后我们只需要实现这个逻辑就可以了，这里就不带着大家做一遍了。