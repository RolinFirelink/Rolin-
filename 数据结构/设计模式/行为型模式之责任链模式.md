现在我们来学习责任链模式，先来看看我们的现实生活中的情况

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE2d0c130b5ed7e5b47cf87c81b62ff1fe.png)

接着我们来看看定义和结构

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE9e70ed58f60ec229452734c1e5d15fdb.png)

我们现在来讲解一个案例来加深我们的理解，先来看看案例需求和类图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE8860990eb76056bf55ccc6758a498891.png)

首先我们要创建的当然是请假条类，没有请假条那怎么发送请求？这里进行基本的构造，提供了对应的构造方法和setandget方法

```
//请假条类
public class LeaveRequest {
    //姓名
    private String name;

    //请假天数
    private int num;

    //请假内容
    private String content;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getNum() {
        return num;
    }

    public void setNum(int num) {
        this.num = num;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public LeaveRequest(String name, int num, String content) {
        this.name = name;
        this.num = num;
        this.content = content;
    }
}

```

然后创建抽象处理者类，我们这里提供三个常量用于设置后续不同组员能处理的请假时长，之所以设置常量，是因为后续我们可能会改动他们的权限，此时使用常量我们就可以轻易尽量减少源代码的多次改动

然后我们其中还要聚合另外一个Handler对象，这就意味着我们的一个组长可能有上一级的领导，我们提供对应的构造方法，再提供一个提交请假条的方法，提供请假条的方法先判断当前组长能否成功处理，若能则进行处理，不能则继续提交给上一级

最后还有一个各级领导处理请假条的方法，这个方法由于每个不同级别的领导处理的权限不同，因此设置为抽象方法

```
public abstract class Handler {
    protected final static int NUM_ONE = 1;
    protected final static int NUM_THREE = 3;
    protected final static int NUM_SEVEN = 7;

    //该领导处理的请求天数区间
    private int numStart;
    private int numEnd;

    //声明后继者(声明上级领导)
    private Handler nextHandler;

    public Handler(int numStart) {
        this.numStart = numStart;
    }

    public Handler(int numStart, int numEnd) {
        this.numStart = numStart;
        this.numEnd = numEnd;
    }

    //设置上级领导对象
    public void setNextHandler(Handler nextHandler) {
        this.nextHandler = nextHandler;
    }

    //各级领导处理请假条的方法
    protected abstract void handleLeave(LeaveRequest leave);

    //提交请假条
    public void submit(LeaveRequest leave) {
        if(this.nextHandler != null && leave.getNum() > this.numEnd){
            //提交给上级领导进行审批
            this.nextHandler.submit(leave);
        }else {
            //该领导进行审批
            this.handleLeave(leave);
            System.out.println("流程结束!");
        }
    }
}
```

然后我们创建具体的处理者类，分别是小组长，主管和总经理类，他们都要实现抽象处理者类，其对应的构造方法则传入我们想要设置的能够处理的请假时长，重写的方法则是固定的处理请假的方法

```
//小组长类，具体的处理者
public class GroupLeader extends Handler{

    public GroupLeader() {
        super(0,Handler.NUM_ONE);
    }

    @Override
    protected void handleLeave(LeaveRequest leave) {
        System.out.println(leave.getName()+"请假"+leave.getNum()+"day,"+leave.getContent()+"。");
        System.out.println("小组长审批通过");
    }
}
```

最后我们在客户端中写入如下代码，我们这里先创建请假对象，然后创建各个领导对象，设置对应的领导间具有的层级关系，最后再先由小组长对象提交请假申请，最后可以得到我们想要的结果

```
public class Client {
    public static void main(String[] args) {
        //创建一个请假条对象
        LeaveRequest leave = new LeaveRequest("小明",1,"身体不适");

        //创建各级领导对象
        GroupLeader groupLeader = new GroupLeader();
        Manager manager = new Manager();
        GeneralManager generalManager = new GeneralManager();

        //设置处理者链
        groupLeader.setNextHandler(manager);
        manager.setNextHandler(generalManager);

        //小明提交请假申请
        groupLeader.submit(leave);
    }
}

```

最后我们来看看其优缺点

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEdecd1b66f8b0834e06cd43fffed1cab5.png)

- JDK源码解析



![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEac23f22dcfd815dfcd909822110db45d.png)



![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE9444e16139dc36fd75ed614655605038.png)

上面的源码是我们经过处理之后的简单版本的，很好理解我就不多提了，我们记住，FilterChain是职责链（过滤器）模式的典型应用就行了