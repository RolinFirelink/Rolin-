接着我们来学习最后一个讲解内容，核心配置文件。

- 核心配置文件的介绍

首先我们来介绍下核心配置文件的各个语句的作用，具体的说明都写在了注释中了

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--MyBatis的DTD约束-->
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd">

<!--configuration 核心根标签-->
<configuration>
    <!--environments配置数据库环境，环境可以有多个。default属性指定使用的是哪个-->
    <environments default="mysql">
        <!--environment配置数据库环境  id属性唯一标识-->
        <environment id="mysql">
            <!-- transactionManager事务管理     type属性，采用JDBC默认的事务-->
            <transactionManager type="JDBC"></transactionManager>
            <!-- dataSource数据源信息    type属性 连接池-->
            <dataSource type="POOLED">
                <!-- property获取数据库连接的配置信息-->
                <property name="driver" value="com.mysql.jdbc.Driver"/>
                <property name="url" value="jdbc:mysql://175.178.114.158:3306/db1"/>
                <property name="username" value="root"/>
                <property name="password" value="itheima"/>
            </dataSource>
        </environment>
    </environments>

    <!--mappers引入映射配置文件-->
    <mappers>
        <!-- mapper 引入指定的映射配置文件     resource属性指定映射配置文件的名称-->
        <mapper resource="StudentMapper.xml"/>
    </mappers>
</configuration>
```

这里我们的environment标签是可以写入多个的，改变defalut的值可以令其执行不同的environment标签内的配置内容

引入映射配置文件的代码其实也可以写多个，不过这里只写一个就可以了

总结请看下图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE9b8760365559cccd36374a6960b30e51.png)

- properties标签的使用

根据我们的开发规范，我们的获取数据库连接的相关配置是不可以写死到我们的配置文件里的，我们是要将其额外抽取出来到我们的properties文件中的，那么我们可以构造properties文件并写入代码如下

```
driver=com.mysql.jdbc.Driver
url=jdbc:mysql://175.178.114.158:3306/db1
username=root
password=itheima
```

然后将我们的核心配置文件的配置信息改造如下

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--MyBatis的DTD约束-->
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd">

<!--configuration 核心根标签-->
<configuration>

    <!--引入数据库连接的配置文件-->
    <properties resource="jdbc.properties"/>

    <!--environments配置数据库环境，环境可以有多个。default属性指定使用的是哪个-->
    <environments default="mysql">
        <!--environment配置数据库环境  id属性唯一标识-->
        <environment id="mysql">
            <!-- transactionManager事务管理     type属性，采用JDBC默认的事务-->
            <transactionManager type="JDBC"></transactionManager>
            <!-- dataSource数据源信息    type属性 连接池-->
            <dataSource type="POOLED">
                <!-- property获取数据库连接的配置信息-->
                <property name="driver" value="${driver}"/>
                <property name="url" value="${url}"/>
                <property name="username" value="${username}"/>
                <property name="password" value="${password}"/>
            </dataSource>
        </environment>
    </environments>

    <!--mappers引入映射配置文件-->
    <mappers>
        <!-- mapper 引入指定的映射配置文件     resource属性指定映射配置文件的名称-->
        <mapper resource="StudentMapper.xml"/>
    </mappers>
</configuration>
```

- 起别名的使用

我们观察我们的映射配置文件，会看到我们映射配置文件里总是要引入很长的Student类的地址，这样很不方便，我们可以给这个类起一个别名，这样我们只需要写入这个别名就可以了，能让我们的代码变得简洁

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE6c4af317a121279e82318e3940b37f8d.png)

起别名需要两个标签，分别是父标签typeAliases和子标签typeAlias，子标签是真正用于添加别名的标签，其下有两个属性，分别是type，用于指定要取别名的类的地址，alias，用于给该类取别名。如果我们想要给整个包取别名，也可以调用typeAliases下的package标签

那么我们可以在核心配置文件中写入代码如下

```
<!--起别名-->
<typeAliases>
    <typeAlias type="com.itheima.bean.Student" alias="student"/>
</typeAliases>
```

然后我们就可以在映射配置文件中将我们的全路径全部改为我们的别名了，我们可以改造我们的映射配置代码如下

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--MyBatis的DTD约束-->
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
    mapper:核心根标签
    namespace属性：名称空间
-->
<mapper namespace="StudentMapper">
    <!--
        select:查询功能的标签
        id属性：唯一标识
        resultType属性：指定结果映射对象类型
        parameterType属性：指定参数映射对象类型
    -->
    <select id="selectAll" resultType="student">
        SELECT * FROM student
    </select>

    <select id="selectById" resultType="student" parameterType="int">
        SELECT * FROM student WHERE id = #{id}
    </select>

    <insert id="insert" parameterType="student">
        INSERT INTO student VALUES (#{id},#{name},#{age})
    </insert>

    <update id="update" parameterType="student">
        UPDATE student SET name = #{name},age = #{age} WHERE id = #{id}
    </update>

    <delete id="delete" parameterType="java.lang.Integer">
        DELETE FROM student WHERE id = #{id}
    </delete>
</mapper>
```

我们这里将Interger类型的路径直接改为int是因为在MyBatis里已经将常用类型改别名了，其对应的别名如下

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE5885a271777b38da56aa2d45535c554d.png)

- 核心配置文件小结

最后我们可以做一个关于核心配置文件的小结

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEef860c4efa7cf86f058f433a3207a41e.png)

