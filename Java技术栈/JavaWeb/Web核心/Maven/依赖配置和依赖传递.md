做完了第一个Maven程序之后，本节我们来学习Maven的依赖管理和生命周期，这也是maven管理的最后一个内容，本来是打算一节讲完的，发现内容真挺多，所以就分三节了

- 依赖配置与依赖传递

首先我们对什么是依赖已经不陌生了，所谓依赖指的就是当前项目运行所需的jar，一个项目可以设置多个依赖，我们设置依赖的方式都是通过如下所示的设置配置文件的方式来进行设置的

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE8512d198564c8b7df62e24fe9f994504.png)

设置一个依赖最起码需要写入依赖，也就是jar包的所属群组id（groupId），所属项目id（artifactId）以及版本号（version），依赖的大标签为dependencies，而其设置具体依赖的子标签为dependency

请看下图的依赖配置

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE3fcd0f91f0714ee981577cdf0f723f4e.png)

可以看到我们在内部配置了两个依赖，一个是log4j，一个是junit，左侧也有对应的其所使用的到的jar包的资源展示，可以看到有三个项目，但是后面两个我们这里为了版面就不展示了，我们主要看第一个，我们可以看到其下有log4j和junit的依赖，而junit又有对一个org.hamcrest:hamcrest-core:1.3的依赖，简单来说就是我们的第一个项目用到了junit和log4j这两个jar包，而junit这个jar包又要用到另外一个jar包

如果说我们的第二个工程里要用到第三个工程的资源的话，那我们应该要怎么做呢？很简单，我们只要将第三个工程的坐标复制下来，然后用配置依赖的方式将其配置到第二个工程中就可以了，此时我们可以看到右侧的maven管理窗口里，也会发生相应的变化

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEceb4555405e2c039f8e2fc0a217fd0da.png)

容易看到第二个项目里已经有了第三个工程的资源，点开其下也有log4j的资源文件可以使用，我们现在做的这个动作就是依赖传递，其有直接依赖和间接依赖，同时直接依赖和间接依赖也具有相对性

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE49950464fd031bd78d4a82a4891728ce.png)





不过是灰色的，这是因为这个log4j没用到，我们实际用到的是自己的log4j的资源，这样就涉及到了资源使用的优先级的问题，当依赖关系出现冲突时，maven总是按照路径优先、声明优先以及特殊优先这三条法则来解决，路径优先指的是当依赖中出现相同的资源时，层级越低，优先级越高。而声明优先指的是当其在相同层级时，配置顺序靠前的覆盖靠后的。而特殊优先指的是当同级配置了相同资源的不同版本时，后配置的覆盖先配置的。

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE1177667c091d36e2e80fc433203928c0.png)

接着我们来介绍可选依赖，假定我们项目二里使用到了项目三，而项目三里使用到了junit，而如果我们希望达到一种项目二无法知道项目三使用了junit的效果，这时就需要用到可选依赖，可选依赖指的就是对外隐藏当前所依赖的资源，也即是令其变得不透明

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE96a76aa669e48d4d22dbaa35c27d1e8f.png)

使用可选依赖的方式很简单，就是在对应的配置依赖中加入一个optional标签再加上true就可以了，最后我们来看看效果，请看下图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE90273744b02515df277172e20dd24044.png)

可以看到我们这里log4j和junit都配置了可选依赖，此时项目二中使用了项目三，但是项目二中却无法查看到项目三里所使用的东西。再提一嘴，可选依赖要在被使用的资源上去配置

但是此时我们能够看到，我们在项目三中使用了junit的依赖，而我们就能查看到junit使用了另外一个依赖，如果我们希望隐藏junit的依赖，那我们应该怎么办呢？首先，用我们当前的方法肯定是行不通的，因为我们当前的方法隐藏依赖是要到对应的配置依赖中去设置的，而我们显然不能对junit做什么动作，此时我们就需要用到我们的排除依赖，先来看看什么是排除依赖

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEa891c78dcb7588101187e2e31d925a6d.png)

所谓排除依赖指的是我们主动断开依赖的资源，被排除依赖的资源不需要指定版本，其默认会排除所有版本。排除依赖所用的大标签是eclusions，其本身又是dependency的子标签，该标签下可以配置多个排除依赖，具体配置排除依赖的标签是exclusion，还有一点是，排除依赖需要到使用资源的项目中去配置，下图是排除依赖之后的效果

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE4a25ec1ee302339bb687943a1f33e839.png)

要注意的一点是，虽然说排除依赖和可选依赖效果大差不差，但是其本质效果是不同的，排除依赖指的是主动断开某些资源，而可选依赖则是自己因此掉自己的一些依赖。前者要在使用资源的项目中去配置，而后者要在被使用的项目中配置。这两者是有本质差别的，千万别简单理解为他们一模一样