本章节我们来学习在MyBatis里的分页插件，我们不妨先来看看关于分页插件的介绍

- 分页插件的介绍

分页插件可以将很多条结果进行分页显示，我们从中要得到的信息是当前在第几页，一共有几页，一页有多少条结果，这就是分页插件所要完成的事情。

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE7220b4bb049d6128d19a22d0326668a6.png)

我们不妨现在MySQL上来实现下我们的分页功能，当然，首先我们需要一些数据，假设我们的数据表中有以下数据

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEa6b3cf29122f2497b02ae30d81e418c3.png)

然后我们在mysql中执行分页操作，可以写入其代码如下

```
-- 第一页：显示3条数据  当前页（当前页-1*每页显示条数）,每页显示条数
SELECT * FROM student LIMIT 0,3

-- 第二页：显示3条数据  当前页（当前页-1*每页显示条数）,每页显示条数
SELECT * FROM student LIMIT 3,3

-- 第三页：显示3条数据  当前页（当前页-1*每页显示条数）,每页显示条数
SELECT * FROM student LIMIT 6,3
```

我们上面的代码虽然可以执行分页操作，但是其不方便，可以看到我们要显示不同的页还要自己计算，突出一个傻逼，而且这里我们使用分页操作利用到了LIMIT关键词，而这个关键词又只有mysql支持，要是换了个数据库就没法用了，那这就很没用。此时我们的分页插件就应运而生了

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEc12e2f23074a010eb078583d4edbf7de.png)

我们要利用到的第三方的分页助手是PageHelper

- 分页插件的使用

接着我们来正式学习下分页插件PageHelper的使用，我们先来看看其实现步骤

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE1bc4904803a0c4093d454eff389dfd18.png)

然后我们首先导入jar包，然后我们就首先要在核心配置文件中集成我们的分页助手插件，写入如下代码就行了（没错，集成就是这么简单）

```
<!--集成分页助手插件-->
<plugins>
    <plugin interceptor="com.github.pagehelper.PageInterceptor"></plugin>
</plugins>
```

那么我们可以创建测试类并写入代码如下

```
package com.itheima.paging;

import com.github.pagehelper.PageHelper;
import com.itheima.bean.Student;
import com.itheima.mapper.StudentMapper;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Test;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

public class Test01 {
    @Test
    public void selectPaging() throws Exception{
        InputStream is = Resources.getResourceAsStream("MyBatisConfig.xml");

        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);

        SqlSession sqlSession = sqlSessionFactory.openSession(true);

        StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);

        //通过分页助手来实现分页功能
        //第一页：显示三条数据
        //PageHelper.startPage(1,3);
        //第二页：显示三条数据
        //PageHelper.startPage(2,3);
        //第三页：显示三条数据
        PageHelper.startPage(2,3);

        List<Integer> ids = new ArrayList<>();
        ids.add(1);
        ids.add(1);

        List<Student> list = mapper.selectAll();

        for (Student student:list) {
            System.out.println(student);
        }
    }
}

```

这里我们在获取结果，甚至于是传入参数之前就调用了分页助手，令其来帮助我们展示指定的页数，最后也能打印出我想要的数据

- 分页参数的获取

在我们的分页插件里，不但有分页功能，还有很多其他的方法可以帮助我们来获取很多其他的分页时所存在的信息。具体请看下图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE6ecc1633ea36b4698d9768bf0512ce41.png)

我们可以在我们的测试类里写入对应的代码，来测试测试这些方法，那么我们可以写入代码如下

```
@Test
public void selectPaging() throws Exception{
    InputStream is = Resources.getResourceAsStream("MyBatisConfig.xml");

    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);

    SqlSession sqlSession = sqlSessionFactory.openSession(true);

    StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);

    //通过分页助手来实现分页功能
    //第一页：显示三条数据
    //PageHelper.startPage(1,3);
    //第二页：显示三条数据
    //PageHelper.startPage(2,3);
    //第三页：显示三条数据
    PageHelper.startPage(3,3);

    List<Integer> ids = new ArrayList<>();
    ids.add(1);
    ids.add(1);

    List<Student> list = mapper.selectAll();

    for (Student student:list) {
        System.out.println(student);
    }

    //获取分页相关参数
    PageInfo<Student> info = new PageInfo<>(list);
    System.out.println("总条数"+info.getTotal());
    System.out.println("总页数"+info.getPages());
    System.out.println("当前页："+info.getPageNum());
    System.out.println("每页显示条数"+info.getPageSize());
    System.out.println("上一页"+info.getPageSize());
    System.out.println("下一页"+info.getNextPage());
    System.out.println("是否是最后一页"+info.isIsLastPage());
    System.out.println("是否是第一页"+info.isIsFirstPage());
}
```

在上面的代码里我们调用了其各种方法来获得其各种参数的内容，实际得到的内容如下

```

    总条数8
            总页数3
当前页：3
        每页显示条数3
        上一页3
        下一页0
        是否是最后一页true
        是否是第一页false

        Process finished with exit code 0

```

这些内容都是符合我们所要的内容的，没有什么问题

- 分页插件的小结

最后我们可以对本章做一个小结

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE55cca9163302c4382b67fbbb89807a15.png)

