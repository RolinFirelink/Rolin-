我们之前的开发都是利用配置文件的形式开发的，非常不方便，还要写一大堆，我们现在来学习使用注解形式开发。值得一提的是并不是说我们学习了注解形式开发之后配置文件的形式就不需要了，需不需要主要取决于公司的需求

- 注解开发的介绍

注解形式的开发需要用到常用注解，具体我们要学习的常用注解请看下图

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE1b45644fa5fbfe496f80488bc8bb269b.png)

- 注解实现查询的操作

我们先来看看我们实现的步骤

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE19772fda01e30b808d7fc5946e6e989c.png)

我们创建接口并写入方法然后使用对应的查询注解并在注解里写入对应的实现sql语句

```
package com.itheima.mapper;

import com.itheima.bean.Student;
import org.apache.ibatis.annotations.Select;

import java.util.List;

public interface StudentMapper {
    //查询全部
    @Select("SELECT * FROM student")
    public abstract List<Student> selectAll();
}
```

接着我们在核心配置文件里面配置映射

```
<!--配置应关系-->
<mappers>
    <package name="com.itheima.mapper"/>
</mappers>
```

这里我们要使用子标签package，内部只要输入我们的接口所在的包名就可以了

最后我们写入测试类的代码如下

```
package com.itheima.test;

import com.itheima.bean.Student;
import com.itheima.mapper.StudentMapper;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;
import org.junit.Test;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

public class Test01 {
    @Test
    public void selectAll() throws Exception {
        //1.加载核心配置文件
        InputStream is = Resources.getResourceAsStream("MyBatisConfig.xml");

        //2.获取SqlSession工厂对象
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);

        //3.通过工厂对象获取SqlSession对象
        SqlSession sqlSession = sqlSessionFactory.openSession(true);

        //4.获取StudentMapper接口的实现类对象
        StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);

        //5.调用实现类对象中的方法，接收结果
        List<Student> list = mapper.selectAll();

        //6.处理结果
        for (Student student:list) {
            System.out.println(student);
        }

        //7.释放资源
        sqlSession.close();
        is.close();
    }
}

```

经过测试我们发现这是可以运行的，没有任何问题。那我只能说我草了，这他妈的比几把什么配置文件方便太多了啊 ，鬼才会用配置文件啊，反正是我我肯定用注解

最后我们这里的代码运行过程是先动态获取实现类，调用实现类的方法，然后通过注解的信息执行对应的方法最后返回相应的结果

- 注解实现新增的操作

本节我们来学习用注解来实现新增操作，请看步骤

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE25158d498a9c6b55e1043cbb8dced90c.png)

首先我们在接口类中写入对应方法的代码和注解

```
//新增操作
@Insert("INSERT INTO student VALUES (#{id},#{id},#{age})")
public abstract Integer insert(Student stu);
```

然后我们将我们的测试代码稍作修改，其实就是将之前的获取集合改为传入一个自己的对象然后打印返回的影响条数就行了

```
@Test
public void insert() throws Exception {
    //1.加载核心配置文件
    InputStream is = Resources.getResourceAsStream("MyBatisConfig.xml");

    //2.获取SqlSession工厂对象
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);

    //3.通过工厂对象获取SqlSession对象
    SqlSession sqlSession = sqlSessionFactory.openSession(true);

    //4.获取StudentMapper接口的实现类对象
    StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);

    //5.调用实现类对象中的方法，接收结果
    Student stu = new Student(5,"周七",26);
    Integer result = mapper.insert(stu);

    //6.处理结果
    System.out.println(result);

    //7.释放资源
    sqlSession.close();
    is.close();
}
```

- 注解实现修改的操作

首先在接口中写入代码如下

```
//修改操作
@Update("UPDATE student SET name=#{name},age=#{age} WHERE id=#{id}")
public abstract Integer update(Student stu);
```

然后在测试类中稍微改改代码就完了

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEcc5afbc21f5715f720b1bdca66d8f410.png)

- 注解实现删除的操作

首先在接口中写入代码如下

```
//删除操作
@Delete("DELETE FROM student WHERE id=#{id}")
public abstract Integer delete(Integer id);
```

然后修改下测试类的代码

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCE699652e14e722b89e26e933836ffef65.png)

- 注解开发的小结

在本章中，我们可以很明显地感受到注解开发的好处，他令我们不用去花时间关注什么几把的传入参数，传回参数，我们只需要嗯用注解就可以了，真的方便太多了。最后我们可以看看本章的总结

![](D:/Rolin的学习笔记/youdaonote-pull/youdaonote/youdaonote-images/WEBRESOURCEd0c6d05235a4bf2bb06f61a35b1b71f6.png)

